<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Machines - Atelier</title>
<link rel="stylesheet" href="css/styles.css">
<style>
body { font-family:'Segoe UI', Arial, sans-serif; margin:0; background:#f7f9fc; }
header { display:flex; justify-content:space-between; align-items:center; padding:12px 20px; background:linear-gradient(to right,#3a7bd5,#00d2ff); color:white; }
header h1 { margin:0; font-size:24px; }
#logoutBtn, #backBtn { padding:6px 12px; border:none; border-radius:4px; cursor:pointer; background:white; color:#333; font-weight:bold; margin-left:5px;}
#main { display:flex; margin:20px; gap:20px; position:relative; }

/* Sidebar */
#sidebar { width:300px; background:white; padding:15px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.1); display:flex; flex-direction:column; transition:0.3s; }
#sidebar h3 { margin-top:10px; margin-bottom:5px; }
#searchInput { padding:6px 10px; margin-bottom:10px;margin-left: 50px ; border-radius:4px; border:1px solid #ccc; }
#addMachineBtn { margin-bottom:10px; background:#3a7bd5; color:white; font-weight:bold; padding:8px; border-radius:5px; cursor:pointer; }
#addMachineBtn:hover { background:#1f5fa1; }
.machine-item { padding:8px 10px; margin-bottom:6px; background:#3a7bd5; color:white; cursor:pointer; border-radius:6px; transition:0.2s; }
.machine-item:hover { background:#1f5fa1; }

/* Canvas */
#canvas-wrapper { flex:1; background:white; border-radius:8px; height:500px; position:relative; box-shadow:0 4px 10px rgba(0,0,0,0.1); overflow:hidden; }
#canvas { width:100%; height:100%; transform-origin: 0 0; position:relative; }

/* Canvas machine */
.canvas-machine { position:absolute; cursor:move; transition:0.2s; text-align:center; }
.canvas-machine img { width:90px; height:90px; border-radius:8px; display:block; margin:0 auto; }
.machine-label { font-size:13px; font-weight:bold; margin-top:4px; padding:2px 6px; border-radius:4px; color:white; }

/* Mini-map */
#minimap { position:absolute; bottom:20px; right:20px; width:200px; height:150px; background:rgba(0,0,0,0.1); border:1px solid #333; border-radius:6px; overflow:hidden; z-index:1000; }
#minimap-canvas { position:relative; width:100%; height:100%; }
.minimap-machine { position:absolute; width:8px; height:8px; background:#3a7bd5; border-radius:2px; cursor:pointer; }

/* Modals */
.modal { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:white; padding:20px; border-radius:8px; width:350px; box-shadow:0 4px 12px rgba(0,0,0,0.25); }
.modal-content input { width:100%; padding:6px; margin-bottom:10px; border-radius:4px; border:1px solid #ccc; }
.modal-content button { width:100%; padding:8px; background:#3a7bd5; color:white; border:none; border-radius:4px; cursor:pointer; }
.modal-content button:hover { background:#1f5fa1; }

/* Button retirer machine */
#removeFromPlanBtn { background:#ff7f50; margin-top:10px; }
#removeFromPlanBtn:hover { background:#e05530; }

/* Toggle Sidebar icon */
#toggleSidebarBtn { position:absolute; top:10px; left:10px; background:#3a7bd5; color:white; border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; font-size:20px; z-index:1001; display:flex; justify-content:center; align-items:center; }
#toggleSidebarBtn:hover { background:#1f5fa1; }

/* Zoom controls */
#zoom-controls { position:absolute; bottom:20px; left:20px; display:flex; flex-direction:column; gap:5px; z-index:1000; }
#zoom-controls button { padding:6px 10px; border:none; background:#3a7bd5; color:white; font-weight:bold; border-radius:5px; cursor:pointer; }
#zoom-controls button:hover { background:#1f5fa1; }
</style>
</head>
<body>

<header>
  <div><button id="backBtn">&larr; Ateliers</button></div>
  <h1 id="atelierTitle">Machines</h1>
  <button id="logoutBtn">Se déconnecter</button>
</header>

<div id="main">
  <div id="sidebar">
    <input type="text" id="searchInput" placeholder="Rechercher une machine...">
    <button id="addMachineBtn">Ajouter Machine</button>
    <h3>Machines disponibles</h3>
    <div id="machineList"></div>
  </div>

  <div id="canvas-wrapper">
    <div id="canvas"></div>

    <!-- Zoom controls -->
    <div id="zoom-controls">
      <button id="zoomInBtn"> +</button>
      <button id="zoomOutBtn">-</button>
      <button id="resetZoomBtn">⟳</button>
    </div>

    <!-- Mini-map -->
    <div id="minimap">
      <div id="minimap-canvas"></div>
    </div>
  </div>

  <!-- Toggle sidebar icon -->
  <button id="toggleSidebarBtn">&#9776;</button>
</div>

<!-- Modal Ajouter / Modifier -->
<div class="modal" id="machineModal">
  <div class="modal-content">
    <h3 id="modalTitle">Ajouter Machine</h3>
    <input type="text" id="machineCode" placeholder="Code">
    <input type="text" id="machineName" placeholder="Nom">
    <button id="saveMachineBtn">Sauvegarder</button>
  </div>
</div>

<!-- Modal Infos -->
<div class="modal" id="infoModal">
  <div class="modal-content" id="infoContent">
    <h3>Infos Machine</h3>
    <div id="machineInfo"></div>

    <!-- Contrôles statut (masqués pour user) -->
    <div id="statusControls">
      <label for="statusSelect">Statut :</label>
      <select id="statusSelect">
        <option value="running">running</option>
        <option value="stopped">stopped</option>
        <option value="idle">idle</option>
      </select>
      <button id="updateStatusBtn">Modifier statut</button>
    </div>

    <button id="removeFromPlanBtn">Retirer du plan</button>
    <button onclick="infoModal.style.display='none'">Fermer</button>
  </div>
</div>

<script src="js/machines.js"></script>
</body>
</html>
